## Separata: Instalación y Configuración Inicial de PostgreSQL

Esta separata explica cómo **instalar PostgreSQL**, qué herramientas utilizar para administrarlo y cuáles son los **primeros comandos SQL y de consola** que conviene conocer.

---

## A. Proceso de Instalación

PostgreSQL está disponible para los principales sistemas operativos.

### 1. Instalación en Windows

- Descargar el instalador oficial desde:  
  https://www.postgresql.org/download/windows/
- Ejecutar el instalador y seguir el asistente:
  - Elegir versión.
  - Definir contraseña para el usuario `postgres` (superusuario por defecto).
  - Confirmar el **puerto** (por defecto: `5432`).
- Al finalizar se instalarán, entre otros:
  - El motor de PostgreSQL.
  - **pgAdmin 4** (herramienta gráfica).
  - Herramientas de línea de comandos (`psql`, `pg_dump`, etc.).

---

### 2. Instalación en Linux (Debian/Ubuntu)

En muchas distribuciones, PostgreSQL está disponible en los repositorios oficiales:

```bash
sudo apt update
sudo apt install postgresql postgresql-contrib
```

Comprobar el estado del servicio:

```bash
sudo systemctl status postgresql
```

Conectarse como usuario del sistema `postgres`:

```bash
sudo -iu postgres
psql
```

---

### 3. Instalación en macOS

Con **Homebrew**:

```bash
brew install postgresql
brew services start postgresql
```

Verificar la versión instalada:

```bash
psql --version
```

---

### 4. Configuración inicial típica

Después de instalar PostgreSQL, los pasos iniciales suelen ser:

1. Iniciar **pgAdmin 4** o abrir la consola `psql`.
2. Conectarse al servidor PostgreSQL.
3. Crear una **base de datos** de trabajo.
4. Crear un **rol/usuario** para las conexiones de la aplicación.
5. Ejecutar consultas en el **Query Tool** (pgAdmin) o en `psql`.

Ejemplo (en `psql`) para crear una base de datos y un usuario:

```sql
-- Crear una base de datos
CREATE DATABASE tienda;

-- Crear un usuario con contraseña
CREATE ROLE usuario_tienda
    WITH LOGIN PASSWORD 'MiPassSegura';

-- Dar permiso de conexión y creación de objetos en la BD
GRANT CONNECT ON DATABASE tienda TO usuario_tienda;
GRANT CREATE ON DATABASE tienda TO usuario_tienda;
```

---

## B. Herramientas de Interacción

Las dos herramientas más utilizadas para trabajar con PostgreSQL son:

### 1. pgAdmin 4 (interfaz gráfica)

**pgAdmin 4** es una interfaz web que permite administrar PostgreSQL desde un navegador:

- Conectar y registrar **servidores**.
- Crear y modificar:
  - Bases de datos.
  - Esquemas, tablas, índices, vistas.
  - Roles y permisos.
- Ejecutar consultas con el **Query Tool**.

Flujo básico:

1. Abrir pgAdmin 4.
2. Conectarse al servidor con el usuario `postgres` u otro usuario.
3. Navegar al árbol de objetos y administrar la base de datos.

---

### 2. psql (consola de comandos)

`psql` es la **consola oficial** de PostgreSQL. Permite:

- Conectarse a un servidor y base de datos.
- Ejecutar **SQL estándar**.
- Usar comandos internos (empiezan con `\`) para inspeccionar objetos.

Ejemplo de conexión desde terminal:

```bash
psql -U postgres -h localhost -p 5432
```

Opcionalmente, conectarse directamente a una base de datos específica:

```bash
psql -U usuario_tienda -h localhost -p 5432 -d tienda
```

Comandos útiles dentro de `psql`:

```text
\l        -- Lista las bases de datos
\c tienda -- Cambia a la base de datos 'tienda'
\dt       -- Lista las tablas del esquema actual
\du       -- Lista roles/usuarios
\q        -- Sale de psql
```

---

## C. Primeros Pasos y Comandos Básicos

Una vez conectado a la base de datos (ya sea con pgAdmin o `psql`), puedes comenzar a ejecutar comandos SQL.

### 1. Comandos SQL básicos (DML)

Estos comandos manipulan datos dentro de las tablas:

- `SELECT` → leer datos.
- `INSERT` → insertar filas nuevas.
- `UPDATE` → modificar filas existentes.
- `DELETE` → eliminar filas.

Ejemplo completo:

```sql
-- Crear una tabla sencilla
CREATE TABLE productos (
    id_producto  SERIAL PRIMARY KEY,
    nombre       VARCHAR(100) NOT NULL,
    precio       NUMERIC(10,2) NOT NULL
);

-- Insertar datos
INSERT INTO productos (nombre, precio)
VALUES
    ('Teclado', 80.50),
    ('Mouse',   35.00);

-- Consultar datos
SELECT * FROM productos;

-- Actualizar un registro
UPDATE productos
SET precio = 79.99
WHERE nombre = 'Teclado';

-- Eliminar un registro
DELETE FROM productos
WHERE nombre = 'Mouse';
```

---

### 2. Bases de datos predeterminadas

Al iniciar el servidor PostgreSQL, ya existen algunas bases de datos especiales.  
Puedes listarlas con:

```sql
SELECT datname
FROM pg_database;
```

Las más importantes son:

| Base de datos | Descripción                                                                 |
|---------------|-----------------------------------------------------------------------------|
| `postgres`    | Base de datos genérica para uso administrativo y pruebas.                  |
| `template1`   | Plantilla principal usada al crear nuevas bases de datos.                  |
| `template0`   | Plantilla mínima; se usa para crear bases “limpias” sin configuraciones adicionales. |

> Recomendación:  
> - No modificar `template0`.  
> - Tener cuidado al cambiar `template1`, ya que afectará a todas las bases nuevas.  
> - Usar `postgres` o una base de datos propia (como `tienda`) para la práctica diaria.

---

## Resumen

- PostgreSQL se instala fácilmente en **Windows**, **Linux** y **macOS**.
- Las herramientas principales son:
  - **pgAdmin 4** (interfaz gráfica).
  - **psql** (consola de comandos).
- Los primeros pasos incluyen:
  - Crear bases de datos y usuarios.
  - Ejecutar comandos básicos (`SELECT`, `INSERT`, `UPDATE`, `DELETE`).
  - Conocer las bases predeterminadas (`postgres`, `template1`, `template0`).

Con esta base, ya puedes comenzar a **modelar tablas**, escribir **consultas SQL** y administrar tu entorno PostgreSQL de forma segura.