## Separata Detallada: Inserción de Registros de Forma Aleatoria

Esta sección detalla el proceso avanzado de PostgreSQL para la **inserción masiva de datos de prueba** de forma aleatoria, utilizando una combinación de comandos SQL y funciones específicas del gestor.

### VII. Inserción de Registros de Forma Aleatoria

La inserción de usuarios de forma aleatoria se realiza para generar registros de prueba de manera eficiente, combinando la sentencia `INSERT INTO` con una consulta `SELECT` que genera los datos.

#### 1. Inserción Masiva (`INSERT INTO` y `SELECT`)

El proceso se inicia utilizando la sentencia **`INSERT INTO`** dirigida a la tabla `usuarios` (especificando solo los campos que no se generan automáticamente, como `UUID`), y se complementa con una consulta **`SELECT`** para generar la data necesaria.

Los campos a insertar explícitamente son `nombre`, `apellido`, `email`, `password`, `teléfono`, y `es_admin`,.

#### 2. Generación de Registros de Prueba (`generate_series`)

Para generar un gran volumen de registros, se utiliza la función **`generate_series(1, 100)`**. Esta función, colocada en la cláusula `FROM`, permite crear 100 filas de prueba, representadas por una variable `i` (índice), que se utiliza para generar valores variables en cada columna.

#### 3. Generación de Datos Aleatorios (Nombres, Apellidos y Emails)

La aleatoriedad de los datos se logra mediante la concatenación de *strings* fijos y variables:

*   **Nombres y Apellidos:** Se definen *strings* base (ej. 'skill' para nombres y 'skill apellido' para apellidos) y se concatenan con la variable generada por `generate_series(1, 100)`,.
*   **Correos Electrónicos:** Se concatenan los *strings* generados (nombre y apellido) con el símbolo de arroba (`@`) y un dominio predefinido (ej. 'skill.com').

#### 4. Generación y Cifrado de Contraseñas (MD5 y RANDOM)

Para generar contraseñas de forma aleatoria y segura, se utilizan funciones de cifrado:

*   Se emplea la función **`MD5`** (algoritmo de *hash*) para cifrar el valor resultante.
*   El valor a cifrar se genera utilizando la función **`random()`**, que devuelve un número decimal entre 0 y 1,. Esto asegura que cada contraseña sea única y esté *hasheada* (cifrada).

#### 5. Generación de Datos Variables Condicionales (`CASE WHEN`)

Para generar datos variables en campos como teléfono o dirección, donde se desean patrones o variaciones específicas, se utiliza la estructura **`CASE WHEN`**,,:

*   **Teléfono y Dirección:** Se aplica la estructura `CASE WHEN` sobre la variable de la serie (`i`) utilizando el operador de módulo (`%`) para definir diferentes valores fijos o concatenados según la condición (ej. `i % 3 = 0` para asignar un valor de teléfono o un patrón de dirección específico),,,.
*   **Campo Administrador (`es_admin`):** Se utiliza `i % 10 = 0` para asignar aleatoriamente el valor `TRUE` (administrador) a solo una décima parte de los registros, mientras que el resto puede ser `NULL` o `FALSE`, según las políticas de autenticación,.

Una vez ejecutada la sentencia `INSERT`, se verifica la creación masiva de los 100 registros utilizando una consulta `SELECT * FROM usuario`,. Se confirma que los UUID se generan automáticamente y que las contraseñas son aleatorias y cifradas.