**VI. Migración y Compatibilidad**

La migración en PostgreSQL implica mover datos desde otro sistema de gestión de bases de datos, como SQL Server o MySQL, hacia PostgreSQL. Al igual que con otros gestores de bases de datos, PostgreSQL puede migrar desde sistemas como SQL Server, MySQL y Oracle. Este proceso requiere la adaptación de *scripts* y tipos de datos para asegurar su aceptación por el gestor de destino.

**A. Desafíos de Migración (General)**

**1. Características Específicas: Cada gestor de base de datos tiene características propias que requieren adaptación**
Uno de los principales desafíos en la migración es que **cada gestor de base de datos posee características específicas**. Esto obliga a que los usuarios deban **adaptar** la base de datos para que sea compatible con el sistema de destino.

**2. Tipos de Datos: Necesidad de adaptar tipos de datos comunes sin correspondencia directa (ej. `uniqueidentifier` de SQL Server)**
PostgreSQL puede tener problemas de compatibilidad con tipos de datos comunes en otros sistemas. Por ejemplo, el tipo de dato **`uniqueidentifier`** utilizado en SQL Server **no tiene una correspondencia directa** en PostgreSQL.

**3. Procedimientos Almacenados: Diferencias de lenguaje (Transact-SQL vs. PL/pgSQL), requiriendo reescritura**
Los lenguajes utilizados para los procedimientos almacenados son diferentes entre los gestores. Mientras que SQL Server usa **Transact-SQL**, PostgreSQL utiliza **PL/pgSQL** (lenguaje de programación PostgreSQL). Esta diferencia de lenguaje puede **requerir la reescritura** completa de los procedimientos almacenados y las funciones del sistema. Además, SQL Server tiene funciones propias (como `GETDATE` o `New ID`) que no existen en PostgreSQL, lo cual también requiere adaptación, aunque se menciona que `New ID` podría estar incluida en la versión 17, no viene de forma nativa.

**B. Migración desde SQL Server**

**1. Herramientas**
Para facilitar la migración de datos y estructuras desde SQL Server a PostgreSQL, existen varias herramientas disponibles:
*   **SQL to PostgreSQL Migration Toolkit:** Es una herramienta específica diseñada para migrar datos desde SQL Server a PostgreSQL, facilitando la **conversión de datos, tablas e índices**.
*   **PG Admin:** Aunque no es una herramienta de migración dedicada, puede utilizarse para **importar datos de SQL Server** mediante archivos en formato CSV u otros métodos.
*   **AWS Schema Conversion Tool (SCT):** Es una herramienta que convierte esquemas y migra bases de datos a PostgreSQL, siendo útil principalmente si se tienen sistemas en la nube.
*   **Data Migration Assistant (Asistente):** Esta es una herramienta de Microsoft que ayuda a **evaluar la migración** de bases de datos de SQL Server hacia PostgreSQL.
*   **DB Conver:** Es una herramienta comercial, que también puede tener versiones gratuitas, que proporciona servicios para la **conversión de datos** entre SQL Server, PostgreSQL, Oracle y MySQL.

**C. Migración desde MySQL**

**1. Desafíos**
La migración de MySQL a PostgreSQL presenta desafíos particulares:
*   **Incompatibilidad de tipos de datos:** Los tipos de datos como **`Enum` o `TinyInt` no tienen una equivalencia** directa en PostgreSQL. En MySQL, `Enum` se define directamente en el campo. Sin embargo, en PostgreSQL es necesario **generar una lista o una función** para poder mantener los requisitos del `Enum`.
*   **Sintaxis:** Hay diferencias notables en la sintaxis entre MySQL y PostgreSQL. Esto se observa especialmente en la **creación de índices** y en **funciones agregadas**. La existencia de funciones y operadores en MySQL que no están en PostgreSQL puede hacer necesario **reescribir y reconvertir consultas**.

**2. Herramientas**
Las herramientas disponibles para la migración desde MySQL son:
*   **PG Loader:** Una herramienta de **código abierto** que permite la migración de datos desde MySQL a PostgreSQL, encargándose de la conversión de datos y el **ajuste del esquema**.
*   **AWS SCT:** Herramienta de AWS que permite la conversión automática de esquemas y la migración de bases de datos de MySQL a PostgreSQL.
*   **MySQL Workbench:** Esta herramienta de gestión de MySQL puede usarse para **exportar datos** a formatos compatibles con PostgreSQL, como SQL y CSV.
*   **DB Conver:** Una herramienta comercial que también mantiene compatibilidad para migrar datos desde MySQL.