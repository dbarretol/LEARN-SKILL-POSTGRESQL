**X. Realización y Restauración de Backups (Práctica Detallada)**

**A. Backup mediante Interfaz Gráfica (PG Admin): Uso de la opción *Backup* en el menú contextual de la base de datos, configurando formato y objetos a respaldar**

La realización de una copia de seguridad (backup) utilizando la interfaz gráfica PG Admin se demostró como una forma de generar un *script* para poder utilizar el dato en otro lugar,.

1.  **Inicio del Proceso:** Se accede a la opción de **`Backup`** haciendo clic derecho sobre la base de datos deseada (en este caso, la base de datos `tienda`).
2.  **Configuración de Ubicación y Nombre:** Se especifica la ubicación donde se guardará el archivo de respaldo, asignándole un nombre que incluya la fecha y la hora (ej. `17072025` a las `2:15`).
3.  **Configuración del Formato:** Se puede elegir el formato, seleccionando `customment` (personalizado) o **`play`**.
4.  **Configuración de Opciones de Datos (Data Option):** En las opciones de datos, se puede configurar si se desean **guardar opciones de creación** (`crear opción`) o si se quiere **agregar una inserción** (`insert`) a la copia de seguridad. Se mencionó que se puede dejar en blanco para una configuración simple.
5.  **Selección de Objetos:** Finalmente, se accede a la sección de **`objeto`** para seleccionar **todos los objetos que se desean incluir en el backup**.
6.  **Resultado:** Tras la ejecución, el backup se genera y se guarda en la carpeta especificada. Este método es útil para generar un *script* y poder copiarlo y llevarlo a donde se desee.

**B. Backup y Restauración mediante Línea de Comandos (CMD)**

Para realizar un backup correcto y completo de la base de datos, se recomienda usar la línea de comandos (CMD).

**1. Configuración de Entorno: Agregar la ruta de `PostgreSQL/bin` a la variable PATH para ejecutar comandos desde CMD**
Para que los comandos de PostgreSQL (`PG Doom` o `PG Restore`) funcionen directamente en la línea de comandos (CMD), es imprescindible configurar la **variable de entorno `PATH`**. El proceso incluye:
*   Ingresar a la configuración de las variables de entorno.
*   Navegar a la ruta donde se encuentra el ejecutable de PostgreSQL (ej. `C:/Postgres/versión/bin`).
*   Agregar esta ruta a la variable `PATH` y aceptar los cambios.
*   Es necesario cerrar y volver a abrir la ventana de CMD para que la configuración surta efecto.

**2. Ejecución de PG Dump: Uso de la herramienta `PG Dump` para crear un archivo `.backup`**
Una vez configurado el entorno, se utiliza el comando `PG Doom` para generar el archivo de respaldo completo (`.backup`),:
*   **Comando de Ejecución:** Se utiliza el comando **`PG Doom`**.
*   **Especificación de Usuario:** Se utiliza el parámetro `-U` para especificar el usuario (ej. `Postgress`).
*   **Especificación de Archivo y Ubicación:** Se utiliza el parámetro `-f` para guardar el archivo. Se debe proporcionar la ruta completa entre comillas y el nombre del archivo, terminando con la extensión **`.backup`** (ej. `tienda_DBA.backup`).
*   **Especificación de la Base de Datos:** Finalmente, se indica el nombre de la base de datos a respaldar (ej. `tienda_DB`),.
*   **Contraseña:** Al ejecutar el comando, se solicita la contraseña del usuario (ej. `1 2 3 4 5 6`), y tras introducirla, se genera el archivo `.backup`.

**3. Restauración: Creación de una nueva base de datos (`CREATE DB`) y uso de `PG Restore` para cargar el backup**
Para restaurar el backup, primero es necesario **crear una base de datos vacía** que servirá como destino,.
*   **Creación de Base de Datos:** Se utiliza el comando `CREATE DB` junto con el parámetro `-U` (usuario) para crear la nueva base de datos (ej. `tienda_online_DB`),.
*   **Restauración con PG Restore:** Una vez creada, se usa la herramienta **`PG Restore`**.
*   **Sintaxis:** El comando incluye el parámetro `-U` (usuario), el parámetro `-d` (base de datos de destino, ej. `tienda_online_DB`), y el parámetro `-V` para especificar la **dirección del archivo `.backup`**,.
*   **Ejecución:** Al ejecutar `PG Restore` y proporcionar la contraseña, el sistema restaura los datos, lo cual se confirma mediante un mensaje que indica que se ha restaurado.

**4. Verificación: Confirmación de que las tablas se han restaurado correctamente**
Para verificar la restauración, se accede a la interfaz de PG Admin y se refresca la vista. Se verifica la existencia de la nueva base de datos (`tienda_online_DB`). Al expandir el esquema y las tablas de la base de datos restaurada, se confirma que **todas las tablas generadas en el curso se han cargado correctamente**.