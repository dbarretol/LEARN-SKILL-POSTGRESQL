**IV. Monitoreo y Mantenimiento**

Esta sección se enfoca en las funciones necesarias para supervisar y mantener la base de datos, garantizando su desempeño óptimo y la detección oportuna de problemas de rendimiento.

**A. Comandos de Mantenimiento**

**1. Objetivo: Garantizar el buen rendimiento y mantener la base de datos actualizada (refrescada)**
El objetivo del mantenimiento es garantizar el **buen rendimiento de la base de datos**. Los comandos de mantenimiento aseguran que la base de datos se mantenga **activa y siempre refrescada**. Realizar un mantenimiento regular permite **evitar problemas de rendimiento** y problemas de espacio.

**2. Comandos Principales: Vacuum y Analyze**
Para llevar a cabo el mantenimiento de la base de datos, se deben utilizar principalmente el comando **Vacuum** y el comando **Analyze**.

**3. Tipos de Vacuum**
Existen diferentes tipos de ejecución del comando Vacuum:
*   **a. Vacuum:** Su función es limpiar las **tuplas muertas** (datos que han sido eliminados lógicamente pero que aún ocupan espacio) y **libera espacio**.
*   **b. Vacuum Full:** Este comando realiza una **limpieza y compactación de tablas**, logrando la liberación de espacio **a nivel del sistema de archivos**.
*   **c. Vacuum Analyze:** Esta variante combina la limpieza con la **actualización de las estadísticas de la base de datos**.

**4. Analyze: Solo actualiza estadísticas de la base de datos**
El comando Analyze tiene como única función **actualizar estadísticas de la base de datos**. Tanto Vacuum como Analyze pueden correrse indicando solamente el nombre de la tabla para especificar la acción.

**B. Herramientas de Monitoreo**

**1. Objetivo: Analizar el rendimiento, detectar y optimizar consultas lentas**
Las herramientas de monitoreo, que son comandos del mismo PostgreSQL, tienen el objetivo de **analizar el rendimiento** de la base de datos. Estas herramientas permiten **detectar y optimizar** cuándo o qué consulta específica está lenta. Existen varias vistas que permiten supervisar estas actividades y proporcionar estadísticas.

**2. PG Stat Activity: Monitoreo en tiempo real de conexiones activas e información sobre sesiones activas**
La herramienta `PG Stat Activity` se enfoca en el **monitoreo en tiempo real de las conexiones activas**. Proporciona **información sobre las sesiones activas** y su uso típico incluye el **diagnóstico de bloqueos**. Un ejemplo práctico de su uso es determinar cuántas sesiones activas existen para poder desconectarlas.

**3. PG Stat Statement: Estadística de consultas ejecutadas y agregadas a largo plazo**
La herramienta `PG Stat Statement` muestra **estadística de consultas ejecutadas**. Su principal uso es mostrar estadísticas **agregadas en consultas a largo tiempo**, siendo utilizada típicamente para la **optimización de consultas a largo plazo**.