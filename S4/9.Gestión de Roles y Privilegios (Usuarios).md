**IX. Gestión de Roles y Privilegios (Usuarios)**

Esta sección se centró en la creación de roles de usuario y la gestión de permisos, demostrando cómo controlar el acceso y las capacidades dentro de la base de datos.

**A. Creación de Roles: Uso de `CREATE ROLE` para crear usuarios como `admin tienda` (superusuario) y `manager tienda)**

La creación de un usuario en PostgreSQL se realiza mediante la creación de un rol (role). Se crearon dos roles principales para la base de datos "tienda":

1.  **`admin tienda` (Superusuario):**
    *   Se creó utilizando el comando `CREATE ROLE`.
    *   Se configuró con las cláusulas `WITH LOGIN` y se le asignó una contraseña específica (1 2 3).
    *   Lo más importante es que fue definido como **superusuario** (`SUPERUSER`).
    *   Al ser un superusuario, este rol **automáticamente tiene prácticamente todos los privilegios** sobre las tablas de la base de datos, lo que le permite acceder a todo.

2.  **`manager tienda` (Usuario Estándar):**
    *   Se creó otro rol, `manager tienda`.
    *   Se configuró con una contraseña (1 2 3).
    *   A diferencia del administrador, este rol **no fue definido como superusuario**.

**B. Asignación de Privilegios**

**1. Pruebas de Acceso: Demostración de permiso denegado para un usuario sin privilegios explícitos**

Para demostrar la necesidad de la gestión de privilegios, se realizó una prueba de acceso con el usuario `manager tienda`:

*   Se intentó establecer una conexión con la base de datos `tienda` utilizando el rol `manager tienda`.
*   Al intentar ejecutar una consulta (`SELECT`) sobre las tablas de la base de datos (como la tabla `usuarios`), el sistema devolvió un mensaje de **permiso denegado**.
*   Esto probó que, a pesar de existir en el sistema, un usuario que no es superusuario requiere que se le asignen permisos de forma explícita para acceder a los objetos de la base de datos.

**2. Asignación de Permisos Granulares: Uso de `GRANT` para otorgar privilegios específicos (SELECT) a tablas, esquemas o bases de datos**

Para otorgar los permisos necesarios, se utiliza el comando `GRANT`. El objetivo fue otorgar acceso al `manager tienda` sin darle privilegios de superusuario:

*   **Intento General (Base de Datos):** Se intentó otorgar **todos los privilegios** (`ALL PRIVILEGES`) sobre la base de datos (`DATABASE`) `tienda DB` al `manager tienda` utilizando la cláusula `GRANT ALL PRIVILEGES ON DATABASE`,. Sin embargo, incluso después de esta acción, el `manager tienda` seguía recibiendo **permiso denegado** al intentar consultar la tabla `usuarios`.
*   **Intento Granular (Tablas y Esquemas):** Ante el fallo del permiso general, se procedió a intentar otorgar permisos más específicos y granulares, utilizando `GRANT`:
    *   Se intentó otorgar el permiso **`SELECT`** sobre **todas las tablas** (`ALL TABLES`) dentro del esquema (`tienda`) al `manager tienda`.
    *   Se intentó otorgar el permiso `SELECT` **exclusivamente a la tabla `usuarios`**.
*   **Resultado de la Práctica:** A pesar de los múltiples intentos de asignar privilegios al nivel de la base de datos, las tablas y el esquema,, el usuario `manager tienda` continuó experimentando problemas de acceso denegado,. La corrección de este problema de permisos quedó pendiente para ser revisada en una sesión posterior.