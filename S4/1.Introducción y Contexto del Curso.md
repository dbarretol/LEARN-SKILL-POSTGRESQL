# Sesión 4 – Administración y Herramientas Avanzadas en PostgreSQL

## 1. Contexto del Curso

La sesión marcada corresponde a la **cuarta sesión del módulo de PostgreSQL** dentro del curso de bases de datos. Durante esta sesión se trabajó principalmente con la base de datos de ejemplo llamada **`tienda`**.

### 1.1 Estructura del Curso

El curso está organizado en módulos, entre ellos:

| Módulo         | Tecnología   | Descripción                                           | Estado          |
|----------------|--------------|-------------------------------------------------------|-----------------|
| Módulo 1–3     | PostgreSQL   | Fundamentos y uso intermedio de PostgreSQL           | En progreso     |
| Módulo 4       | PostgreSQL   | Administración y herramientas avanzadas               | Sesión actual   |
| Módulo Final   | SQL Server   | Complemento para la especialización en bases de datos | Próxima semana  |

El **módulo de SQL Server** será el **último módulo del curso** y tiene como objetivo **completar la especialización en gestión de bases de datos**.

### 1.2 Objetivo de la Sesión 4

En esta cuarta sesión se introdujo el tema de la **administración y herramientas avanzadas en PostgreSQL**, con énfasis en:

- **Copias de seguridad (backups)**
- **Restauración de bases de datos**

Estos conceptos son fundamentales para garantizar la **disponibilidad**, **integridad** y **recuperación** de la información ante fallos.

---

## 2. Desarrollo de la Sesión

### 2.1 Inicio y Verificaciones Iniciales

Al inicio de la sesión, el instructor:

1. Saludó a los participantes.
2. Verificó:
   - Que el **audio** fuera claramente audible.
   - Que la **pantalla de presentación** fuera visible para todos.
3. Inició la **grabación de la sesión**.
4. Pasó a la parte **práctica** de la clase.

---

## 3. Conexión al Servidor y Base de Datos

### 3.1 Datos Básicos de Conexión

Durante la sesión, el instructor se conectó a una instancia de PostgreSQL y utilizó la base de datos llamada **`tienda`**.

> Nota: La contraseña utilizada en el entorno de clase fue **`123456`**.  
> En un entorno real, **no se recomienda** usar contraseñas débiles o triviales.

Podemos resumir los datos de conexión en la siguiente tabla (ejemplo típico de laboratorio):

| Parámetro   | Valor de ejemplo |
|------------|------------------|
| Host       | `localhost`      |
| Puerto     | `5432`           |
| Usuario    | `postgres`       |
| Base de datos | `tienda`      |
| Contraseña | `123456`         |

### 3.2 Ejemplo de Conexión con `psql`

Un modo habitual de conectarse a PostgreSQL es usando la herramienta de línea de comandos `psql`:

```bash
psql -h localhost -p 5432 -U postgres -d tienda
```

Al ejecutar este comando, se solicitará la contraseña del usuario `postgres`:

```text
Password for user postgres:
```

Tras ingresar la contraseña correcta (`123456` en el ejemplo de la clase), se obtendrá el prompt interactivo de PostgreSQL:

```text
psql (15.0)
Type "help" for help.

tienda=#
```

### 3.3 Ejemplo de Conexión desde una Aplicación (opcional)

Como referencia para el aprendizaje, este sería un ejemplo básico en **Python** usando `psycopg2`:

```python
import psycopg2

conexion = psycopg2.connect(
    host="localhost",
    port=5432,
    user="postgres",
    password="123456",   # Ejemplo educativo, no usar en producción
    dbname="tienda"
)

cursor = conexion.cursor()
cursor.execute("SELECT NOW();")
print("Fecha y hora del servidor:", cursor.fetchone()[0])

cursor.close()
conexion.close()
```

---

## 4. Preparación para Backups y Restauración

Aunque en esta parte del resumen aún no se detallan los comandos específicos de backup y restore, la conexión correcta a la base de datos **`tienda`** es el paso previo indispensable para:

- Ejecutar **copias de seguridad** (por ejemplo, con `pg_dump`).
- Realizar **restauraciones** (por ejemplo, con `pg_restore` o scripts SQL).

Ejemplos de comandos que se verán en el contexto de la administración avanzada:

```bash
# Backup de la BD 'tienda' en formato SQL
pg_dump -h localhost -U postgres -d tienda -f tienda_backup.sql

# Restauración desde un archivo SQL
psql -h localhost -U postgres -d tienda -f tienda_backup.sql
```

> Estos comandos se explicarán en detalle en la parte práctica del módulo de administración.

---